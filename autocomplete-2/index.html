<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Autocomplete</title>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div id="autocomplete-1"></div>
    <!-- <div id="autocomplete-2"></div> -->
    <script src="js/lodash.js"></script>
    <script src="js/app.js" charset="utf-8"></script>
    <script>

      const DESTINATIONS = [
        { name: "Barcelona", id: "bcn" },
        { name: "New York", id: "nyc" },
        { name: "Seattle", id: "sea" },
        { name: "Seoul", id: "icn" },
        { name: "Madrid", id: "mad" },
        { name: "Washington, DC", id: "wag" },
        { name: "Sydney", id: "syd" }
      ];

      function getSuggestion(input) {
        return new Promise((resolve, reject) => {
          const delay = Math.random() * 300;
          setTimeout(() => {
            const res = DESTINATIONS.filter(({name}) =>
              name.toLowerCase().indexOf(input.toLowerCase()) === 0);
            console.log(`Called! with ${input}, Replying ${JSON.stringify(res)}`);
            resolve(res);
          }, delay);
        })
      }

      function onSelect(value) {
        $message = document.getElementById('message');
        $message.innerHTML = `You selected ${value} for your destination`;
      }

      window.onload = () => {
        const autocomplete1 = new Autocomplete('autocomplete-1', getSuggestion);
        // const autocomplete2 = Autocomplete('autocomplete-2', getSuggestion);
        // autocomplete2.onSelect(onSelect);
      };
    </script>
  </body>
</html>
